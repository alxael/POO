# Tema

## Set up
Please ensure that [CMake](https://cmake.org) and [vcpkg](https://vcpkg.io/en/) are installed on your system. In addition, please ensure that all project dependencies are installed on your system. You can do this by going into the directory where the `vcpkg.json` file is found, and running the command `sudo vcpkg install`. This will install all necesary dependencies. To initialize the project, in the `tema2` directory run the `cmake --preset=default` command to generate the build folder.

The project uses a local PostgreSQL instance to store data. The project connects to the PostgreSQL database using the `libpqxx` library. The default database it uses to store data is `poo`. If you wish to store data in another database, you may pass it as the first argument to the executable (i.e. if you want to connect to database `test` you may run `./build/tema2 test`).

## Running the project
Once the PostgreSQL instance is running on your system, and you have selected the database you wish to store your data in, build your project by running `cmake --build build`, and then start the project by running `./build/tema2`.

## Logging
All logging in the project is done using the `spdlog` library. The folder `logs` contains the `main.log` file, which stores all logs generated by the project. To print objects you may use standard I/O methods, but the data you print will also appear in the log files.

## About the project
This is a simple banking application, generically named "Useless bank". The project is currently a CLI tool that manages users, their accounts, and their transactions.

### General
The user interacts with the application using the CLI. There is a series of available commands, which you may see by entering the `help` command. There is also an utility `clear` command that helps clear the terminal if it gets cluttered. The `exit` command shuts down the application.

### Users
Each user has a unique email address associated with their account, a password, a first and last name. In addition, each user has a tax residence associated with their account.

A user may choose to create an account by entering the `signup` command. The command prompts you to enter a *valid* email (the email is checked using a regular expression) and a *strong* password (the password must contain at least 8 characters, 1 uppercase, 1 lowercase and one special character). In addition, the user must enter a first and last name. Upon completion, a new user will be created, and you will automatically be authenticated.

A user may also choose to login into an existing account by entering the `login` command. The user will be prompted with a classic email/password form. If credentials are valid, the user will be authenticated and notified of this action. A user may log out of an account by entering the `logout` command.

A user may delete their account by entering the `delete` command. The user will be prompted with a confirmation form, and the account will be deleted, together with *all* of the associated accounts and transfers.

A user may view information about their own account (and only about their own account), by entering the `info-user` command. The command will prompt the user with all information it stores about him (excluding accounts and transactions).

### Accounts
Each account is associated with a unique IBAN, specific to the user's tax residence. Accounts come in various currencies, and hold immediately upon creation 0 of their respective currency. In addition, each account has a holder first and last name (as an account may be associated to a user's friend/relative for example).

A user may view his accounts (and only his accounts) by entering the `view-accounts` command. The command will prompt the user with all necessary information about their bank accounts.

A user may add a new account by entering the `add-account` command. The user will be prompted to enter information about the bank account they wish to create, and upon completing this process, a new bank account, with a randomly generated IBAN specific to the user's country of origin will be created.

### Transactions
Each transactions is associated with two *different* bank accounts, and an amount (in the currency of the outbound account).

A user may create a new transaction by entering the `new-transaction` command. The user will be prompted to enter the IBAN of the outbound and inbound account, and the amount. Upon completion, the amount will be converted to the target currency using the current exchange rate, and deposited into the inbound account.

A user may view the transactions (inbound and outbound) related to an account by entering the `view-transactions` command. The user will be prompted to enter one of their bank account's IBANs (a user may not view transactions from an account that does not belong to him).

### Exchange
A user may view the current exchange rates of the application by entering the `view-exchange` command.
